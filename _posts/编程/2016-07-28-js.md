---
layout: post
title: JS相关
categories: [编程]
tags: []
disqus: y
---
# Javascript 装载和执行: [原文地址](http://coolshell.cn/articles/9749.html)

## JavaScript运行两大特性

1. 载入后马上执行
2. 执行时会阻塞后续的内容(包括页面的渲染、其他资源的下载; js文件串行地载入，并依此执行)

## 最普通的例子

    // alert.js
    alert("hello world")
    // html
    <script type="text/javascript" src="alert.js"></script>

在alert("hello world")时，页面停止渲染。

很多网站把JavaScript放在网页的最后面，或者动用window.onload/document ready之类的事件。

## 异步载入

### document.write方式

    <script type="text/javascript" language="javascript">
    function loadjs(script_filename) {
        document.write('<' + 'script language="javascript" type="text/javascript"');
        document.write(' src="' + script_filename + '">');
        document.write('<'+'/script'+'>');
        alert("loadjs() exit...");
    }

    var script = 'http://coolshell.cn/asyncjs/alert.js';

    loadjs(script);
    alert("loadjs() finished!");
    </script>

    <script type="text/javascript" language="javascript">
       alert("another block");
    </script>

上面例子的执行顺序：
1. alert("loadjs() exit...")
2. alert("loadjs() finished!")
3. alert("hello world")
4. alert("another block")

### script的defer和async属性

从IE6开始支持defer标签

    <script defer type="text/javascript" src="alert.js"></script>