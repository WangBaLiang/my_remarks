---
layout: post
title: Ubuntu系统配置
categories: [系统]
tags: []
disqus: y
---
##环境设置
### 显示前缀设置
* \u – Username
* \h – Hostname
* \w – Full path of the current working directory
* 系统默认：${debian_chroot:+($debian_chroot)}\u@\h:\w\$
* 我的配置：修改/etc/bash.bashrc，PS1="[\$(date +%k:%M:%S)] \u@\h:\W\$ "，样式如下：[17:16:57] root@et:share$
* [参考配置](http://www.thegeekstuff.com/2008/09/bash-shell-ps1-10-examples-to-make-your-linux-prompt-like-angelina-jolie/)

###语言设置

        export LANG="zh_CN.UTF-8"    # 设置为中文
        export LANG="en_US.UTF-8"    # 设置为英文，export LANG=C
        可加入/etc/profile

###文本界面字体大小

        sudo dpkg-reconfigure console-setup
        Latin7-->Terminus-->28x14-->OK
        sudo setfont /usr/share/consolefonts/Lat7-Terminus28x14.psf.gz


###时间设置

        # 改变时区
        cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
        */10 * * * * /usr/sbin/ntpdate cn.pool.ntp.org >/dev/null 2>&1

###修改默认shell

        # 查看系统安装的shell
        $ cat /etc/shells

        # 临时修改当前使用shell，如ksh
        $ ksh
        # 退出
        $ exit

        # 修改用户默认shell
        $ grep username /etc/passwd  # 查看用户的默认shell
        username:x:500:500::/home/username:/bin/bash  # 默认bash
        $ chsh  # 输入当前用户密码和指定shell路径后修改


###sudo配置
visudo修改/etc/sudoers，语法如下：

        # The first ALL is the users allowed
        # The second one is the hosts
        # The third one is the user as you are running the command
        # The last one is the commands allowed
        %sudo   ALL=(ALL:ALL) ALL
        %sudo   ALL=(ALL)       NOPASSWD: ALL


##系统备忘
###权限

        rwxr-xr-x
        文件所有者的权限
        文件的组的权限
        所有其他用户的权限


##命令备忘

        # 指定用户组
        useradd -g sudo wuruimioa


##问题记录
###ssh问题
#### ubuntu无法ssh连接
1. ps x|grep sshd查看进程是否存在，不存在则
    * apt-get install ssh/openssh-client
    * apt-get install openssh-server 安装sshd
    * /etc/init.d/ssh start
2. 查看IP是否有冲突
    * sudo apt-get install arp-scan
    * arp-scan -I eth0 -l | grep 192.168.1.42
3. 登陆默认使用root用户，查看/etc/ssh/sshd_config，注释PermitRootLogin without-password后即可使用root登陆

